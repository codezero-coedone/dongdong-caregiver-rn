# TOOLING / EXEC SPEC — v0.1 (SEALED)

목적: “지금 환경(Win11 + Codemagic + 로컬 코어 8001)”에 최적화된 **단일 실행 규격**을 봉인한다.  
원칙: 동일 입력 → 동일 결과(결정성), 로컬 환경 오염 최소, CI 중심.

---

## 0) 절대 규칙 — 로컬 코어 서버

- **127.0.0.1:8001 은 로컬 시스템 코어 서버다. 절대 끊지 않는다.**
- 어떤 스크립트도 8001 리스너 PID를 종료하면 안 된다.

---

## 1) “어떤 작업을 어떤 확장자로 할지” (단일 규격)

### 1.1 로컬 자동화 / 오케스트레이션: `.ps1` (PowerShell)
사용처:
- 환경 점검(preflight), SSH 원격 호출, 파일 복사/정리, 로그 수집
- 재현 가능한 배선 작업(로컬 빌드 제외)

실행 규격:
- `pwsh -NoProfile -ExecutionPolicy Bypass -File <script>.ps1`
- 장시간/대량 출력은 파일로 기록하고, 콘솔 출력은 핵심만(멈춤/타임아웃 방지)

### 1.2 “긴급 차단/즉시 복구”: `.cmd` (cmd.exe)
사용처:
- 특정 PID 종료(예: 터미널 stuck), 단발성 복구, UI에서 더블클릭 실행

규칙:
- 반드시 **PID 기반**으로만 종료한다(프로세스명 광역 kill 금지).
- 8001 관련 프로세스는 종료 금지.

### 1.3 리눅스(원격 서버/CI) 스크립트: `.sh`
사용처:
- Codemagic CI 내부 단계, 원격 서버에서 실행되는 빌드/배포 스크립트

로컬 Windows에서 `.sh`를 “직접” 돌리는 건 금지(WSL/경로/권한 문제로 결정성 깨짐).

### 1.4 파이썬/노드 스크립트
원칙:
- **데이터 파싱/일회성 변환** 등 “도구 역할”로만 사용한다.
- 로컬에 Node/Python 의존이 생기면 CI/온보딩 비용이 급증하므로, 기본은 `.ps1`로 대체한다.

---

## 2) Git/터미널 멈춤 방지 규칙

- `git diff`/긴 출력은 항상 `git --no-pager ...`
- cmd quoting 문제가 있는 경우(괄호/특수문자) 로컬 실행은 `cmd.exe /c`로 감싼다.

---

## 3) 빌드/배포 규격(프로덕션 파이프라인)

- 로컬 빌드 금지.
- **코드 수정 → push → Codemagic build → (AAB/APK 산출물) → Play Console 업로드(자동)** 가 유일한 경로.

