# 간병인 앱 인증 플로우

> **작성일**: 2025-12-08  
> **상태**: Draft - 협의 필요

---

## 개요

간병인 앱의 회원가입 및 로그인 플로우를 정의합니다.

---

## 1. 회원가입 플로우

```mermaid
flowchart TD
    A[앱 시작] --> B{첫 방문?}
    B -->|Yes| C[온보딩 화면]
    B -->|No| D{로그인 상태?}
    D -->|Yes| HOME[홈 화면]
    D -->|No| C
    
    C --> E[로그인 방식 선택]
    E --> F[카카오 로그인(고정)]
    E --> H[이메일 로그인<br/>심사용]
    
    F --> I{기존 회원?}
    H --> I
    
    I -->|Yes| HOME
    I -->|No| J[전화번호 인증]
    
    J --> K{번호 등록됨?}
    K -->|Yes| L[기존 계정 연결 안내]
    L --> HOME
    K -->|No| M[기본 정보 입력]
    
    M --> N[약관 동의]
    N --> O[회원가입 완료]
    O --> HOME
```

---

## 2. 상세 단계

### Step 1: 소셜/이메일 로그인

| 방식 | 설명 | 비고 |
|------|------|------|
| 카카오 로그인 | 카카오 SDK 사용 | 메인 로그인 방식 |
| 애플 로그인 | Apple Sign In | **v0.1 범위 제외(추후)** |
| 이메일 로그인 | ID/PW 입력 | **앱스토어 심사용** |

**처리 로직:**
- 소셜 로그인 성공 → 서버에서 JWT 발급
- 기존 회원이면 → 바로 홈 화면
- 신규 회원이면 → 전화번호 인증으로 이동

---

### Step 2: 전화번호 인증

**목적:** 본인 확인 및 중복 가입 방지

| 상황 | 처리 |
|------|------|
| 새 번호 | 회원가입 진행 (Step 3) |
| 기존 번호 | "이미 가입된 번호입니다" 모달 → 기존 계정으로 로그인 |

**구현:**
- SMS 인증번호 4자리 발송
- 3분 타이머
- 테스트 코드: `1234`

---

### Step 3: 기본 정보 입력

| 필드 | 필수 | 설명 |
|------|------|------|
| 이름 | ✓ | 실명 |
| 주민등록번호 | ✓ | 앞 6자리 + 뒷 1자리 (마스킹) |
| 휴대폰 | ✓ | Step 2에서 인증 완료 |
| 주소 | ✓ | 활동 지역 (다음 주소 API) |
| 범죄경력회보서 | ✗ | 선택 업로드 |

---

### Step 4: 약관 동의

| 약관 | 필수 |
|------|------|
| 서비스 이용약관 | ✓ |
| 개인정보 처리방침 | ✓ |
| 마케팅 수신 동의 | ✗ (선택) |

---

### Step 5: 프로필 정보 입력 (회원가입 후)

| 필드 | 필수 | 설명 |
|------|------|------|
| 프로필 사진 | ? | TBD |
| 자격증 | ? | 간병 관련 자격증 업로드 |
| 경력 사항 | ? | 간병 경력 입력 |

---

## 3. 현재 구현 현황

| 화면 | 파일 | 상태 |
|------|------|------|
| 온보딩 1 | `app/onboarding/index.tsx` | ✅ 완료 |
| 온보딩 2 | `app/onboarding/step2.tsx` | ✅ 완료 |
| 소셜 로그인 | `app/onboarding/step3.tsx` | ✅ 완료 |
| 전화번호 인증 | `app/signup/info.tsx` | ✅ 완료 |
| 약관 동의 | `app/signup/terms.tsx` | ✅ 완료 |
| 간병인 정보 입력 | `app/signup/caregiver-info.tsx` | ✅ 완료 |
| 자격증 및 경력 등록 | `app/signup/career.tsx` | ✅ 완료 |
| 주소 검색 | (1차 범위 제외 / WebView 사용 금지로 미구현) | - |

---

## 4. 타임라인

| 우선순위 | 작업 | 예상 | 상태 |
|----------|------|------|------|
| P0 | 기본 정보 입력 화면 | 0.5일 | ✅ 완료 |
| P0 | 약관 동의 화면 | 0.5일 | ✅ 완료 |
| P0 | JWT 토큰 관리 | 0.5일 | ✅ 완료 |
| P1 | 주소 검색 API 연동 | 1일 | ✅ 완료 |
| P1 | 프로필 정보 화면 (자격증/경력) | 1일 | ✅ 완료 |
| P2 | 파일 업로드 서버 연동 | 1일 | 예정 |
| P2 | 이메일 로그인 (심사용) | 0.5일 | 예정 |
